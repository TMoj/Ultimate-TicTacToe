<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" http-equiv="X-UA-Compatible" content="ie=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link id="myStyle" rel="stylesheet" type="text/css" href="style.css">
	<style>@import url("style.css") screen;</style>
	<title>Ultimate Tic-Tac-Toe</title>

	<script>

	class o{};class x{};class empty{};

	let turn;
	let previousField='none';
	let startingID;
	const winCombo=[
		[1,2,3],
		[4,5,6],
		[7,8,9],
		[1,4,7],
		[2,5,8],
		[3,6,9],
		[1,5,9],
		[3,5,7],
	];

	function LadyRNG(num){																											//RNG from 1 to x
		var num=Math.floor((Math.random()*num)+1); 
		return num;
	}
	
	function turnChange(){																											 //Changes player
		if(turn===1){
			turn++;
			pDisplay.innerHTML="<img src=circle.png>Turn: Player 2";
		}else{
			turn--;
			pDisplay.innerHTML="<img src=cross.png>Turn: Player 1";
		}
	}

	function smallField(fieldID){													//Change contents of the smaller fields
		document.getElementById(fieldID).setAttribute('value','');
		if(turn===1){
			document.getElementById(fieldID).classList.add('x');
  	}else{
			document.getElementById(fieldID).classList.add('o');
		}
	}

	function fieldSelect(fieldID){																					//Change active field
		if(previousField==='none'){
			for (let i = 1; i<10; i++) {
				fieldLock([i]);
			}startingID=fieldID.toString().slice(1);
			Softlock();
		}else{
			fieldLock(previousField);
		}var field=fieldID.toString().slice(0,1);
		document.getElementById(field).style.backgroundColor="white";
		document.getElementById(field).style.pointerEvents="auto";
		previousField=field;
	}

	function Softlock(){
		if(previousField==='none'){
			document.getElementById(startingID).classList.add('softlock');
		return false;
		}
	}

	function fieldLock(field){																			 //Locks away the given field
		if (document.getElementById(field).classList.contains('xw')===true){
		document.getElementById(field).style.backgroundColor='#de9d87';
		}else{
			if (document.getElementById(field).classList.contains('ow')===true){
				document.getElementById(field).style.backgroundColor="#dede87";		
			}else{
				document.getElementById(field).style.backgroundColor="burlywood";
			}
		} 
		document.getElementById(field).style.pointerEvents="none";
	}

	function checkField(){																							//Check for field content
	var check=[1,2,3,4,5,6,7,8,9]
	for (i=0;i<9;i=i+1){
		var x=i++;
		check[i]='check[i]'+x;alert(check[i]);
		if(document.getElementById(1+[i]).getAttribute('value')==='n'){}
				
	} 
	return true;
	}

	function bigField(f){																	//Changes contents of the bigger fields
		if (document.getElementById(f).classList.contains('xw')===true ||
		document.getElementById(f).classList.contains('ow')===true){
			return;
		}var bf=f+'0';
		var check=checkField();
		if(check=true){
			if(turn===1){
				document.getElementById(f).classList.add('xw');
				document.getElementById(bf).classList.add('xb');
			} else {
				document.getElementById(f).classList.add('ow');
				document.getElementById(bf).classList.add('ob');
			}
		}
	}

	document.addEventListener(																						//Initial load function
		"DOMContentLoaded",function(){
			turn=LadyRNG(2);
			turnChange();
			startingID=turn;
		}
	);

	function Turn(fieldID){																												//Turn Function
		var f=fieldID.toString().slice(1)
		smallField(fieldID);
		bigField(f);
		fieldSelect(fieldID);
		turnChange();
	}

	</script>
</head>

<body>
	
	<h1 id=test>Meta Tic-Tac-Toe</h1><hr>
	<button id='pDisplay'><img src=empty.png></button><hr>

	<div style="float:left; width: 32%;background-color:burlywood">						<!--left field-->
		<table>
			<tr>
				<td id='1' style="background-color: white;">										<!--top left field-->
					<table>
						<tr>
							<td id=11 value=n><img src="empty.png" onclick=Turn(11)></td>
							<td id=21 value=n><img src="empty.png" onclick=Turn(21)></td>
							<td id=31 value=n><img src="empty.png" onclick=Turn(31)></td>
						</tr>
						<tr>
							<td id=41 value=n><img src="empty.png" onclick=Turn(41)></td>
							<td id=51 value=n><img src="empty.png" onclick=Turn(51)></td>
							<td id=61 value=n><img src="empty.png" onclick=Turn(61)></td>
						</tr>
						<tr>
							<td id=71 value=n><img src="empty.png" onclick=Turn(71)></td>
							<td id=81 value=n><img src="empty.png" onclick=Turn(81)></td>
							<td id=91 value=n><img src="empty.png" onclick=Turn(91)></td>
						</tr>
					</table>
				</td>

				<td id='2' style="background-color: white;">									<!--top middle field-->
					<table>
						<tr>
							<td id=12 value=n><img src="empty.png" onclick=Turn(12)></td>
							<td id=22 value=n><img src="empty.png" onclick=Turn(22)></td>
							<td id=32 value=n><img src="empty.png" onclick=Turn(32)></td>
						</tr>
						<tr>
							<td id=42 value=n><img src="empty.png" onclick=Turn(42)></td>
							<td id=52 value=n><img src="empty.png" onclick=Turn(52)></td>
							<td id=62 value=n><img src="empty.png" onclick=Turn(62)></td>
						</tr>
						<tr>
							<td id=72 value=n><img src="empty.png" onclick=Turn(72)></td>
							<td id=82 value=n><img src="empty.png" onclick=Turn(82)></td>
							<td id=92 value=n><img src="empty.png" onclick=Turn(92)></td>
						</tr>
					</table>
				</td>
				
				<td id='3' style="background-color: white;">									 <!--top right field-->
					<table>
						<tr>
							<td id=13 value=n><img src="empty.png" onclick=Turn(13)></td>
							<td id=23 value=n><img src="empty.png" onclick=Turn(23)></td>
							<td id=33 value=n><img src="empty.png" onclick=Turn(33)></td>
						</tr>
						<tr>
							<td id=43 value=n><img src="empty.png" onclick=Turn(43)></td>
							<td id=53 value=n><img src="empty.png" onclick=Turn(53)></td>
							<td id=63 value=n><img src="empty.png" onclick=Turn(63)></td>
						</tr>
						<tr>
							<td id=73 value=n><img src="empty.png" onclick=Turn(73)></td>
							<td id=83 value=n><img src="empty.png" onclick=Turn(83)></td>
							<td id=93 value=n><img src="empty.png" onclick=Turn(93)></td>
						</tr>
					</table>
				</td>
			</tr>
			
			<tr>
				<td id='4' style="background-color: white;">								 <!--middle left field-->
					<table>
						<tr>
							<td id=14 value=n><img src="empty.png" onclick=Turn(14)></td>
							<td id=24 value=n><img src="empty.png" onclick=Turn(24)></td>
							<td id=34 value=n><img src="empty.png" onclick=Turn(34)></td>
						</tr>
						<tr>
							<td id=44 value=n><img src="empty.png" onclick=Turn(44)></td>
							<td id=54 value=n><img src="empty.png" onclick=Turn(54)></td>
							<td id=64 value=n><img src="empty.png" onclick=Turn(64)></td>
						</tr>
						<tr>
							<td id=74 value=n><img src="empty.png" onclick=Turn(74)></td>
							<td id=84 value=n><img src="empty.png" onclick=Turn(84)></td>
							<td id=94 value=n><img src="empty.png" onclick=Turn(94)></td>
						</tr>		
					</table>
				</td>
				
				<td id='5' style="background-color: white;">										 <!--central field-->
					<table>
						<tr>
							<td id=15 value=n><img src="empty.png" onclick=Turn(15)></td>
							<td id=25 value=n><img src="empty.png" onclick=Turn(25)></td>
							<td id=35 value=n><img src="empty.png" onclick=Turn(35)></td>
						</tr>
						<tr>
							<td id=45 value=n><img src="empty.png" onclick=Turn(45)></td>
							<td id=55 value=n><img src="empty.png" onclick=Turn(55)></td>
							<td id=65 value=n><img src="empty.png" onclick=Turn(65)></td>
						</tr>
						<tr>
							<td id=75 value=n><img src="empty.png" onclick=Turn(75)></td>
							<td id=85 value=n><img src="empty.png" onclick=Turn(85)></td>
							<td id=95 value=n><img src="empty.png" onclick=Turn(95)></td>
						</tr>
					</table>
				</td>
				
				<td id='6' style="background-color: white;">								 <!--middle left field-->
					<table>
						<tr>
							<td id=16 value=n><img src="empty.png" onclick=Turn(16)></td>
							<td id=26 value=n><img src="empty.png" onclick=Turn(26)></td>
							<td id=36 value=n><img src="empty.png" onclick=Turn(36)></td>
						</tr>
						<tr>
							<td id=46 value=n><img src="empty.png" onclick=Turn(46)></td>
							<td id=56 value=n><img src="empty.png" onclick=Turn(56)></td>
							<td id=66 value=n><img src="empty.png" onclick=Turn(66)></td>
						</tr>
						<tr>
							<td id=76 value=n><img src="empty.png" onclick=Turn(76)></td>
							<td id=86 value=n><img src="empty.png" onclick=Turn(86)></td>
							<td id=96 value=n><img src="empty.png" onclick=Turn(96)></td>
						</tr>
					</table>
				</td>
			</tr>
			
			<tr>
				<td id='7' style="background-color: white;">									 <!--bottom left field-->
					<table>
						<tr>
							<td id=17 value=n><img src="empty.png" onclick=Turn(17)></td>
							<td id=27 value=n><img src="empty.png" onclick=Turn(27)></td>
							<td id=37 value=n><img src="empty.png" onclick=Turn(37)></td>
						</tr>
						<tr>
							<td id=47 value=n><img src="empty.png" onclick=Turn(47)></td>
							<td id=57 value=n><img src="empty.png" onclick=Turn(57)></td>
							<td id=67 value=n><img src="empty.png" onclick=Turn(67)></td>
						</tr>
						<tr>
							<td id=77 value=n><img src="empty.png" onclick=Turn(77)></td>
							<td id=87 value=n><img src="empty.png" onclick=Turn(87)></td>
							<td id=97 value=n><img src="empty.png" onclick=Turn(97)></td>
						</tr>
					</table>
				</td>
				
				<td id='8' style="background-color: white;">							 <!--bottom center field-->
					<table>
						<tr>
							<td id=18 value=n><img src="empty.png" onclick=Turn(18)></td>
							<td id=28 value=n><img src="empty.png" onclick=Turn(28)></td>
							<td id=38 value=n><img src="empty.png" onclick=Turn(38)></td>
						</tr>
						<tr>
							<td id=48 value=n><img src="empty.png" onclick=Turn(48)></td>
							<td id=58 value=n><img src="empty.png" onclick=Turn(58)></td>
							<td id=68 value=n><img src="empty.png" onclick=Turn(68)></td>
						</tr>
						<tr>
							<td id=78 value=n><img src="empty.png" onclick=Turn(78)></td>
							<td id=88 value=n><img src="empty.png" onclick=Turn(88)></td>
							<td id=98 value=n><img src="empty.png" onclick=Turn(98)></td>
						</tr>
					</table>
				</td>
				
				<td id='9' style="background-color: white;">								<!--bottom right field-->
					<table>
						<tr>
							<td id=19 value=n><img src="empty.png" onclick=Turn(19)></td>
							<td id=29 value=n><img src="empty.png" onclick=Turn(29)></td>
							<td id=39 value=n><img src="empty.png" onclick=Turn(39)></td>
						</tr>
						<tr>
							<td id=49 value=n><img src="empty.png" onclick=Turn(49)></td>
							<td id=59 value=n><img src="empty.png" onclick=Turn(59)></td>
							<td id=69 value=n><img src="empty.png" onclick=Turn(69)></td>
						</tr>
						<tr>
							<td id=79 value=n><img src="empty.png" onclick=Turn(79)></td>
							<td id=89 value=n><img src="empty.png" onclick=Turn(89)></td>
							<td id=99 value=n><img src="empty.png" onclick=Turn(99)></td>
						</tr>
					</table>
				</td>
			</tr>
		</table>
	</div>
	
	<div style="float:right;width:34%; pointer-events: none ;">																				 <!--right field-->
		<table style='background-color: white';>
			<tr>
				<td id="10"><img src="bempty.png"></td>
				<td id="20"><img src="bempty.png"></td>
				<td id="30"><img src="bempty.png"></td>
			</tr>
			<tr>
				<td id="40"><img src="bempty.png"></td>
				<td id="50"><img src="bempty.png"></td>
				<td id="60"><img src="bempty.png"></td>
			</tr>
			<tr>
				<td id="70"><img src="bempty.png"></td>
				<td id="80"><img src="bempty.png"></td>
				<td id="90"><img src="bempty.png"></td>
			</tr>
		</table>
	</div>

	<div style="float:none;margin-left: 32.5%;width:33.5%;">									<!--other things-->
		<p style="padding:20px; background-color: #eeeeee;">
			Grundlegende Regeln:<br><br>
			-Man darf nur in das linke Feld Zeichen einsetzen.<br>
			-Jeder Spieler kann abwechselnd ein Zeichen setzen.<br>
			-Wenn man eines der linken Felder gewinnt, wird das auf das Rechte übertragen.<br>
			-Um das Spiel zu gewwinen, muss man auf dem Rechten Feld gewinnen.<br>
			-Wer das Spiel Softlocked (Kein Zug mehr möglich), verliert.<br><br>
			Spezielle Regeln:<br><br>
			-Der erste Spielzug der Partie ist frei wählbar.<br>
			-Jeder weitere Zug muss im weißen Feld auf  der linken Seite ausgeführt werden.<br>
			-Welche Fläche man in einem Feld betätigt, bestimmt das neue Feld.<br>
			-Ist eines der linken Felder "gewonnen", kann es immer noch verwendet werden.<br>
			-Der erste Spieler wird per Zufall ausgewählt, man kann frei nach Form wählen.<br>
			-Ist in einem der 9 Felder links ein Gleichstand, entscheidet Lady RNG.<br><br>
			Hinweiße:<br><br>
			-Man kann ungewöhnliche Strategien wesentlich besser anwenden.<br>
			-Dies wurde ausschließlich für Mensch-gegen-Mensch Spiele geschrieben.<br>
			-Der Softlock ist nur in über das Feld möglich, wo der erste Spielzug war.
		</p>
		<button onclick=location.reload()>Neustart</button>
	</div>

</body>
</html>